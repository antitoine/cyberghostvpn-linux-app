<div class="container">

  <h1 class="title">
    {{ 'PAGES.HOME.TITLE' | translate }}
  </h1>
  <ng-container *ngIf="cyberGhostAvailable$ | async; else notInstalled">

    <ng-container *ngIf="vpnConnect$ | async; else notConnected">
      <h2 class="connected">
        {{ (!loading ? 'PAGES.HOME.CONNECTED' : 'PAGES.HOME.LOADING') | translate }}
      </h2>
      <button (click)="toggleConnection()" class="btn-connect btn-connect-on" [class.loading]="loading">
        <fa-icon [icon]="faPowerOff" size="5x"></fa-icon>
      </button>
    </ng-container>
    <ng-template #notConnected>
      <h2 class="not-connected">
        {{ (!loading ? 'PAGES.HOME.NOT_CONNECTED' : 'PAGES.HOME.LOADING') | translate }}
      </h2>
      <button (click)="toggleConnection()" class="btn-connect btn-connect-off" [class.loading]="loading">
        <fa-icon [icon]="faPowerOff" size="5x"></fa-icon>
      </button>
      <ng-container *ngIf="countries$ | async as countries">
        <label for="selectCountries">Countries:</label>
        <select id="selectCountries" (change)="onCountryChange($event.target.value)">
          <option *ngFor="let country of countries" [value]="country.code">
            {{ country.name }}
          </option>
        </select>
      </ng-container>
      <ng-container *ngIf="connections$ | async as connections">
        <label for="selectConnections">Connections:</label>
        <select id="selectConnections">
          <option *ngFor="let connection of connections" [value]="connection.id">
            City: {{ connection.city }} - Instances: {{ connection.instance }} - Load: {{ connection.load * 100 }}%
          </option>
        </select>
      </ng-container>
    </ng-template>

  </ng-container>
  <ng-template #notInstalled>
    <p>{{ 'PAGES.HOME.NOT_INSTALLED' | translate }}</p>

    <a routerLink="/install">{{ 'PAGES.HOME.GO_TO_INSTALL' | translate }}</a>
  </ng-template>
</div>
